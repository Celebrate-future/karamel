<div class="container" style="width: 100%;">


    <div class="row" ng-show="landing">

        <div class="col-xs-2 col-sm-2 col-md-2 text-center" >
            <div class="row" ng-show="gs.githubCredentials.email !== ''" ng-click="profileModal()" >
                GitHub Account Details
            </div>   
            <div class ="row text-center">
                <button ng-click="profileModal()" ng-show="gs.githubCredentials.email === ''" class="btn btn-primary"> Login to GitHub</button>
            </div>
            <div class="row">
                <img src="http://gravatar.com/avatar/{{gs.emailHash}}?d=mm" ng-click="profileModal()" id="githubId" style="height: 50px; margin-left: 2px; border: 2px solid white;" class="profile-image img-circle">
            </div>   

            <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6 text-right">
                    <label class="text-muted" ng-show="gs.githubCredentials.email != ''">User: </label>
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6 text-left">
                    {{gs.githubCredentials.user| limitTo: 20}}
                </div>
            </div>   
            <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6 text-right">
                    <label class="text-muted" ng-show="gs.githubCredentials.email != ''">Email: </label> 
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6 text-left">
                    {{gs.githubCredentials.email| limitTo: 20}}
                </div>
            </div>   
            <div class="row">
                <div class="col-xs-6 col-sm-6 col-md-6 text-right">
                    <label ng-click="profileModal()" class="text-muted" ng-show="gs.githubCredentials.email != ''"> Organization: </label> 
                </div>
                <div class="col-xs-6 col-sm-6 col-md-6 text-left"> {{gs.org.name| limitTo: 20}}
                </div>
            </div>   
        </div>        

        <div class="col-xs-4 col-sm-4 col-md-4" ng-show="gs.githubCredentials.email != ''">
            <div class="jumbotron text-center jumboNarrow">
                <h2>New Experiment</h2> 
                <div class="row">
                    <div class="form-group">    
                        <button type="button" class="btn btn-primary vcenter" ng-click="experimentFactoryModal()">New Repository in GitHub</button>
                    </div>        
                </div>        
            </div>
        </div>        

        <div class="col-xs-5 col-sm-5 col-md-6" ng-show="gs.githubCredentials.email != ''">
            <div class="jumbotron jumboNarrow">
                <h2>Load Experiment from GitHub</h2> 
                <div class="row">
                    <div class="col-xs-10 col-sm-10 col-md-10">
                        <div class="form-group">
                            <input id="expName" name="user" placeholder="For example, https://github.com/username/experiment" 
                                   ng-model="gs.repo.sshUrl" class="form-control vcenter"
                                   type="text" tabindex="3">
                        </div>
                    </div>
                    <div class="col-xs-2 col-sm-2 col-md-2">
                        <div class="form-group">    
                            <button for="expName" type="button" class="btn btn-primary" ng-click="loadExperiment()" tabindex="1">Load</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>


    <div class="row col-xs-6 col-sm-12 col-md-12 col-lg-12" ng-show="!landing">


        <form name="uploadExperiment" ng-submit="pushExperiment()" editable-form novalidate="">    

            <div class="row form-group">    
                <span class="col-md-1 col-lg-1"></span>
                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                    <input type="submit" class="btn btn-primary" value="Push Experiment to Github" tabindex="2">
                </div>
                <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">
                    <label class="control-label">Name: </label>
                    <span>{{gs.repo.name| limitTo: 32}}{{ gs.repo.name > 32 ? '...' : ''}}</span>     
                </div>
                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                    <label class="control-label">URL:</label>
                    <span>{{gs.repo.sshUrl| limitTo: 64}}{{ gs.repo.sshUrl > 64 ? '...' : ''}}</span>
                </div>
            </div>

            <div class="row form-group">    
                <div class="col-sm-10 col-md-10 col-lg-10">    
                <span class="col-md-1 col-lg-1"></span>
                    <label for="status.advanced" class="control-label col-xs-2 col-sm-2 col-md-2 col-lg-2">Advanced 
                        <input type="checkbox" id="status.advanced" name="status.advanced" ng-model="status.advanced" tabindex="4">
                    </label>
                    <span class="col-xs-1 col-sm-1 col-md-1 col-lg-1 pull-right" ng-click="toggle()">
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-resize-small': status.expanded, 'glyphicon-resize-full': !status.expanded}"></i>
                    </span>
                </div>
            </div>

            <div class="row form-group col-lg-12" ng-show="status.advanced">
                <div class="row form-group col-lg-10" style="margin-left:10px">

                    <accordion close-others="false">

                        <span class="col-md-1 col-lg-1"></span>
                        <accordion-group is-open="status.userGroup">
                            <accordion-heading>
                                Run experiment as user/group<i class="pull-right glyphicon" ng-class="{'glyphicon-resize-small': status.userGroup, 'glyphicon-resize-full': !status.userGroup}"></i>
                            </accordion-heading>
                            Username/group that owns the binaries/source-code installed and the experiment scripts and results.
                            <div class="row">
                                <span class="col-md-1 col-lg-1"></span>
                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                    <label class="control-label" for="user">Username
                        <input name="user" ng-model="experiment.user" class="form-control "
                               type="text" tabindex="7" required>
                    </label>
                </div>
                <span class="col-xs-1 col-sm-1 col-md-1 col-lg-1"></span>
                <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                    <label class="control-label" for="group">Group
                        <input name="group" ng-model="experiment.group" class="form-control "
                               type="text" tabindex="8" required>
                    </label>
                </div>

                            </div>

                        </accordion-group>
                        <span class="col-md-1 col-lg-1"></span>
                        <accordion-group is-open="status.binaryOpen">
                            <accordion-heading>
                                Download Binary using Http<i class="pull-right glyphicon" ng-class="{'glyphicon-resize-small': status.binaryOpen, 'glyphicon-resize-full': !status.binaryOpen}"></i>
                            </accordion-heading>
                            <div class="row">
                                <span class="col-md-1 col-lg-1"></span>
                                <div class="col-xs-4 col-sm-10 col-md-10 col-lg-10">
                                    <label for="experimentBinaryUrl" class="control-label">URL for binary that is downloaded and extracted to /usr/local/<experimentName>. Uses Chef's 'ark' resource. </label>
                                    <input name="experimentBinaryUrl" placeholder="https://dl.dropboxusercontent.com/u/4555798/myExperiment.jar"  class="form-control" ng-model="experiment.urlBinary" type="text" tabindex="12" required>
                                </div>
                            </div>

                        </accordion-group>
                        <span class="col-md-1 col-lg-1"></span>
                        <accordion-group is-open="status.sourceOpen">
                            <accordion-heading>
                                Clones source code from GitHub URL, then builds it using the Maven command below. <i class="pull-right glyphicon" ng-class="{'glyphicon-resize-small': status.sourceOpen, 'glyphicon-resize-full': !status.sourceOpen}"></i>
                            </accordion-heading>
                            <div class="row form-group">
                                <span class="col-md-1 col-lg-1"></span>
                                <div class="col-xs-3 col-sm-6 col-md-6 col-lg-6">    
                                    <label for="experimentSourceUrl" class="control-label">GitHub URL </label>
                                    <input name="experimentSourceUrl" placeholder="https://github.com/username/experiment.git"  class="form-control" ng-model="experiment.urlGitClone" type="text" tabindex="13" required>
                                </div>        
                            </div>
                            <div class="row form-group">
                                <span class="col-md-1 col-lg-1"></span>
                                <div class="col-xs-3 col-sm-6 col-md-6 col-lg-6">    
                                    <label for="mavenCommand" class="control-label">Maven command</label>
                                    <input name="mavenCommand" placeholder="https://github.com/username/experiment.git"  class="form-control" ng-model="experiment.mavenCommand" type="text" tabindex="13" required>
                                </div>        
                            </div>

                        </accordion-group>
                        <span class="col-md-1 col-lg-1"></span>
                        <accordion-group is-open="status.dependenciesOpen">
                            <accordion-heading>
                                Dependencies: Services that should be running for my Experiment <i class="pull-right glyphicon" ng-class="{'glyphicon-resize-small': status.dependenciesOpen, 'glyphicon-resize-full': !status.dependenciesOpen}"></i>
                            </accordion-heading>
                            <div class="row form-group">
                                <span class="col-md-1 col-lg-1"></span>
                                <div class="col-xs-8 col-sm-11 col-md-11 col-lg-11">    
                                    <label for="dependencies" class="control-label">Comma-separated list of cookbook::recipe entries. Generates the Karamelfile to orchestrate the experiment.</label>
                                    <input placeholder="hadoop::dn, spark::slave" name="dependencies"  class="form-control" ng-model="experiment.dependencies" type="text" tabindex="13" required>
                                </div>        
                            </div>        
                        </accordion-group>
                    </accordion>
                </div>
            </div>
            <br/>




            <div class="row form-group col-lg-12">
                <div class="row form-group col-lg-10" style="margin-left:10px">

                    <accordion close-others="false">
                        <span class="col-md-1 col-lg-1" ng-show="status.advanced"></span>
                        <accordion-group is-open="status.configOpen" ng-show="status.advanced">
                            <accordion-heading>
                                Configuration <i class="pull-right glyphicon" ng-class="{'glyphicon-resize-small': status.configOpen, 'glyphicon-resize-full': !status.configOpen}"></i>
                            </accordion-heading>

                            <div class="row form-group">
                                <span class="col-md-1 col-lg-1"></span>
                                <div class="col-xs-4 col-sm-4 col-md-10 col-lg-10">
                                    <!--<div class="col-xs-4 col-sm-4 col-md-8 col-lg-8">-->
                                    <!--<label for="configFile" class="text">Config File</label>-->
                                    <textarea id="configFile" style="width:100%; float:left; height:400px; overflow:scroll;" ng-model="experiment.code.defaultAttributes" placeholder="key = value  (line-separated for every key-value pair)"  tabindex="10"  class="form-control"></textarea>
                                </div>
                            </div>

                        </accordion-group>

                        <span class="col-md-1 col-lg-1" ng-show="status.advanced"></span>
                        <accordion-group is-open="status.chefOpen" ng-show="status.advanced">
                            <accordion-heading>
                                Pre-Experiment Chef Code <i class="pull-right glyphicon" ng-class="{'glyphicon-resize-small': status.chefOpen, 'glyphicon-resize-full': !status.chefOpen}"></i>
                            </accordion-heading>
                            <div class="row form-group">
                                <span class="col-md-1 col-lg-1"></span>
                                <div class="col-xs-4 col-sm-4 col-md-10 col-lg-10">
                                    <label class="text" for="chefCode">This Chef code is executed before the Experiment Code is run.</label>
                                    <textarea id="chefCode" style="width:100%; height:400px; overflow:scroll;" ng-model="experiment.code.preScriptChefCode" placeholder="Chef code run before the recipe"  tabindex="9"  class="form-control"></textarea>
                                </div>
                            </div>
                        </accordion-group>

                        <span class="col-md-1 col-lg-1"></span>
                        <accordion-group is-open="status.experimentOpen">
                            <accordion-heading>
                                Experiment Code<i class="pull-right glyphicon" ng-class="{'glyphicon-resize-small': status.experimentOpen, 'glyphicon-resize-full': !status.experimentOpen}"></i>
                            </accordion-heading>

                            <div class="row form-group">
                                <span class="col-md-1 col-lg-1"></span>
                                <div class="form-group col-xs-4 col-sm-4 col-md-4 col-lg-4">
                                    <select name="scriptTypes" ng-model="scriptTypes"
                                            ng-options="obj.value as obj.label for obj in scriptTypes">
                                        <option value="">Script type for your experiment.</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row form-group">
                                <span class="col-md-1 col-lg-1"></span>
                                <div class="col-xs-4 col-sm-8 col-md-10 col-lg-10">
                                    <!--<label for="experimentScript">Experiment Code</label>-->
                                    <textarea id="experimentScript" style="width:100%; float:left; height:400px; overflow:scroll;" ng-model="experiment.code.scriptContents" placeholder="Enter the experiment code."  tabindex="14"  class="form-control"></textarea>
                                </div>
                            </div>
                            <br/>

                            <div class="row form-group">
                                <span class="col-md-1 col-lg-1"></span>
                                <div class="col-xs-3 col-sm-8 col-md-10 col-lg-10">
                                    <label for="results" class="control-label">Full path to the Results Directory on the Experiment Server. </label>
                                    <input name="results" ng-model="experiment.resultsDir" class="form-control "
                                           type="text" tabindex="15" required>
                                    <span>The contents of this directory will be downloaded using scp to this machine running Karamel and stored in: $HOME_DIR/.karamel/results.</span>
                                </div>
                            </div>


                        </accordion-group>

                    </accordion>            
                </div>
            </div>

    </div>

</form>
</div>